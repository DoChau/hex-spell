import{S as t,i as e,s,e as n,t as l,c as r,a,g as i,d as c,b as o,f,D as h,h as u,E as d,k as m,n as g,H as v,P as p,L as $,Q as _,O as x,R as y,B as E,T as b,u as w,v as I,r as D,U as V,j as S,m as O,o as T,V as j,W as k,X as P,w as A,Y as N,Z as B,I as C,_ as L,$ as U}from"../chunks/vendor-61dc19e2.js";import{a as q,B as H,c as R,d as W,i as M,e as Q,f as X,h as Y,s as Z}from"../chunks/store-a7a02d29.js";function z(t){let e,s,m;return{c(){e=n("section"),s=l("Timer: "),m=l(t[0]),this.h()},l(n){e=r(n,"SECTION",{class:!0});var l=a(e);s=i(l,"Timer: "),m=i(l,t[0]),l.forEach(c),this.h()},h(){o(e,"class","text-2xl")},m(t,n){f(t,e,n),h(e,s),h(e,m)},p(t,[e]){1&e&&u(m,t[0])},i:d,o:d,d(t){t&&c(e)}}}function F(t,e,s){let{timer:n}=e;return t.$$set=t=>{"timer"in t&&s(0,n=t.timer)},[n]}class G extends t{constructor(t){super(),e(this,t,F,z,s,{timer:0})}}function J(t,e,s){const n=t.slice();return n[1]=e[s],n}function K(t){let e,s,d,v,p,$,_,x=t[1]+"",y=q(t[1])+"";return{c(){e=n("li"),s=n("span"),d=l(x),v=m(),p=n("span"),$=l(y),_=m(),this.h()},l(t){e=r(t,"LI",{class:!0});var n=a(e);s=r(n,"SPAN",{class:!0});var l=a(s);d=i(l,x),l.forEach(c),v=g(n),p=r(n,"SPAN",{class:!0});var o=a(p);$=i(o,y),o.forEach(c),_=g(n),n.forEach(c),this.h()},h(){o(s,"class","text-left"),o(p,"class","text-right"),o(e,"class","flex flex-row justify-between")},m(t,n){f(t,e,n),h(e,s),h(s,d),h(e,v),h(e,p),h(p,$),h(e,_)},p(t,e){1&e&&x!==(x=t[1]+"")&&u(d,x),1&e&&y!==(y=q(t[1])+"")&&u($,y)},d(t){t&&c(e)}}}function tt(t){let e,s,p,$,_,x,y=t[0].score+"",E=t[0].matched_words,b=[];for(let n=0;n<E.length;n+=1)b[n]=K(J(t,E,n));return{c(){e=n("section"),s=n("div"),p=l("Score: "),$=l(y),_=m(),x=n("ul");for(let t=0;t<b.length;t+=1)b[t].c();this.h()},l(t){e=r(t,"SECTION",{class:!0});var n=a(e);s=r(n,"DIV",{class:!0});var l=a(s);p=i(l,"Score: "),$=i(l,y),l.forEach(c),_=g(n),x=r(n,"UL",{class:!0});var o=a(x);for(let e=0;e<b.length;e+=1)b[e].l(o);o.forEach(c),n.forEach(c),this.h()},h(){o(s,"class","text-2xl"),o(x,"class","word-list list-none text-xl svelte-10fauh5"),o(e,"class","score-card")},m(t,n){f(t,e,n),h(e,s),h(s,p),h(s,$),h(e,_),h(e,x);for(let e=0;e<b.length;e+=1)b[e].m(x,null)},p(t,[e]){if(1&e&&y!==(y=t[0].score+"")&&u($,y),1&e){let s;for(E=t[0].matched_words,s=0;s<E.length;s+=1){const n=J(t,E,s);b[s]?b[s].p(n,e):(b[s]=K(n),b[s].c(),b[s].m(x,null))}for(;s<b.length;s+=1)b[s].d(1);b.length=E.length}},i:d,o:d,d(t){t&&c(e),v(b,t)}}}function et(t,e,s){let{score_card:n}=e;return t.$$set=t=>{"score_card"in t&&s(0,n=t.score_card)},[n]}class st extends t{constructor(t){super(),e(this,t,et,tt,s,{score_card:0})}}function nt(t){let e,s,m,g,v,y;return{c(){e=n("div"),s=n("div"),m=n("div"),g=l(t[1]),this.h()},l(n){e=r(n,"DIV",{class:!0});var l=a(e);s=r(l,"DIV",{class:!0});var o=a(s);m=r(o,"DIV",{class:!0});var f=a(m);g=i(f,t[1]),f.forEach(c),o.forEach(c),l.forEach(c),this.h()},h(){o(m,"class","text-4xl"),o(s,"class","hex__body svelte-1wkmy7c"),o(e,"class","hex svelte-1wkmy7c"),p(e,"hex--selected",t[0])},m(n,l){f(n,e,l),h(e,s),h(s,m),h(m,g),v||(y=[$(e,"selectstart",_(t[2])),$(e,"mousedown",_(t[3])),$(e,"mouseover",_(t[4])),$(e,"selectstart",_(t[5]))],v=!0)},p(t,[s]){2&s&&u(g,t[1]),1&s&&p(e,"hex--selected",t[0])},i:d,o:d,d(t){t&&c(e),v=!1,x(y)}}}function lt(t,e,s){let{is_selected:n}=e,{tile:l}=e;return t.$$set=t=>{"is_selected"in t&&s(0,n=t.is_selected),"tile"in t&&s(1,l=t.tile)},[n,l,function(e){y(t,e)},function(e){y(t,e)},function(e){y(t,e)},function(e){y(t,e)}]}class rt extends t{constructor(t){super(),e(this,t,lt,nt,s,{is_selected:0,tile:1})}}function at(t,e,s){const n=t.slice();return n[15]=e[s],n[17]=s,n}function it(t,e,s){const n=t.slice();return n[18]=e[s],n[20]=s,n}function ct(t){let e,s;return{c(){e=n("div"),this.h()},l(t){e=r(t,"DIV",{class:!0}),a(e).forEach(c),this.h()},h(){o(e,"class",s=j(`board-tiles__edge board-tiles__edge--position-${t[1][W(t[20],t[17])]}`)+" svelte-3fu470")},m(t,s){f(t,e,s)},p(t,n){6&n&&s!==(s=j(`board-tiles__edge board-tiles__edge--position-${t[1][W(t[20],t[17])]}`)+" svelte-3fu470")&&o(e,"class",s)},d(t){t&&c(e)}}}function ot(t,e){let s,l,i,u,v,p="boolean"!=typeof e[1][W(e[20],e[17])],$=d,_=p&&ct(e);return i=new rt({props:{tile:e[18].value,is_selected:!1!==e[1][W(e[20],e[17])]}}),i.$on("mousedown",(function(){return e[8](e[20],e[17])})),i.$on("mouseover",(function(){return e[9](e[20],e[17])})),{key:t,first:null,c(){s=n("div"),_&&_.c(),l=m(),S(i.$$.fragment),this.h()},l(t){s=r(t,"DIV",{class:!0});var e=a(s);_&&_.l(e),l=g(e),O(i.$$.fragment,e),e.forEach(c),this.h()},h(){o(s,"class","board-tiles__tile svelte-3fu470"),this.first=s},m(t,e){f(t,s,e),_&&_.m(s,null),h(s,l),T(i,s,null),v=!0},p(t,n){e=t,6&n&&(p="boolean"!=typeof e[1][W(e[20],e[17])]),p?_?_.p(e,n):(_=ct(e),_.c(),_.m(s,l)):_&&(_.d(1),_=null);const r={};4&n&&(r.tile=e[18].value),6&n&&(r.is_selected=!1!==e[1][W(e[20],e[17])]),i.$set(r)},r(){u=s.getBoundingClientRect()},f(){k(s),$()},a(){$(),$=P(s,u,B,{duration:400})},i(t){v||(I(i.$$.fragment,t),v=!0)},o(t){D(i.$$.fragment,t),v=!1},d(t){t&&c(s),_&&_.d(),A(i)}}}function ft(t){let e,s,l,i=[],u=new Map,d=t[15];const v=t=>t[18].index;for(let n=0;n<d.length;n+=1){let e=it(t,d,n),s=v(e);u.set(s,i[n]=ot(s,e))}return{c(){e=n("div");for(let t=0;t<i.length;t+=1)i[t].c();s=m(),this.h()},l(t){e=r(t,"DIV",{class:!0});var n=a(e);for(let e=0;e<i.length;e+=1)i[e].l(n);s=g(n),n.forEach(c),this.h()},h(){o(e,"class","board-tiles__col svelte-3fu470"),p(e,"board-tiles__col--even",t[17]%2)},m(t,n){f(t,e,n);for(let s=0;s<i.length;s+=1)i[s].m(e,null);h(e,s),l=!0},p(t,n){if(102&n){d=t[15],E();for(let t=0;t<i.length;t+=1)i[t].r();i=b(i,n,v,1,t,d,u,e,N,ot,s,it);for(let t=0;t<i.length;t+=1)i[t].a();w()}},i(t){if(!l){for(let t=0;t<d.length;t+=1)I(i[t]);l=!0}},o(t){for(let e=0;e<i.length;e+=1)D(i[e]);l=!1},d(t){t&&c(e);for(let e=0;e<i.length;e+=1)i[e].d()}}}function ht(t){let e,s,l,i,u,d=t[2].board_tiles,m=[];for(let n=0;n<d.length;n+=1)m[n]=ft(at(t,d,n));const g=t=>D(m[t],1,1,(()=>{m[t]=null}));return{c(){e=n("section"),s=n("div");for(let t=0;t<m.length;t+=1)m[t].c();this.h()},l(t){e=r(t,"SECTION",{class:!0});var n=a(e);s=r(n,"DIV",{class:!0});var l=a(s);for(let e=0;e<m.length;e+=1)m[e].l(l);l.forEach(c),n.forEach(c),this.h()},h(){o(s,"class","board-tiles svelte-3fu470"),o(e,"class","board svelte-3fu470")},m(n,r){f(n,e,r),h(e,s);for(let t=0;t<m.length;t+=1)m[t].m(s,null);l=!0,i||(u=[$(s,"mouseleave",_(t[10])),$(s,"mouseup",_(t[11]))],i=!0)},p(t,[e]){if(102&e){let n;for(d=t[2].board_tiles,n=0;n<d.length;n+=1){const l=at(t,d,n);m[n]?(m[n].p(l,e),I(m[n],1)):(m[n]=ft(l),m[n].c(),I(m[n],1),m[n].m(s,null))}for(E(),n=d.length;n<m.length;n+=1)g(n);w()}},i(t){if(!l){for(let t=0;t<d.length;t+=1)I(m[t]);l=!0}},o(t){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)D(m[e]);l=!1},d(t){t&&c(e),v(m,t),i=!1,x(u)}}}function ut(t,e,s){let n,l=d,r=()=>(l(),l=V(a,(t=>s(2,n=t))),a);t.$$.on_destroy.push((()=>l()));let{game:a}=e;r();let{dictionary:i}=e,c=[],o=!1,f=Array(H*R).fill(!1);function h(){for(const t of c)s(1,f[t]=!1,f);c=[]}function u(){o=!1,h()}function m(){o=!1,a.match(c,i),h()}function g(t,e){o=!0,h(),c=[W(t,e)],s(1,f[W(t,e)]=!0,f)}function v(t,e){if(o){const n=W(t,e),l=c.indexOf(n);if(-1===l){const l=W(t,e);(0===c.length||M(l,c[c.length-1]))&&(s(1,f[l]=Q(l,c[c.length-1]),f),c.push(n),c=c)}else if(l===c.length-2){const t=c.pop();c=c,s(1,f[t]=!1,f)}}}return t.$$set=t=>{"game"in t&&r(s(0,a=t.game)),"dictionary"in t&&s(7,i=t.dictionary)},[a,f,n,u,m,g,v,i,(t,e)=>g(t,e),(t,e)=>v(t,e),()=>u(),()=>m()]}class dt extends t{constructor(t){super(),e(this,t,ut,ht,s,{game:0,dictionary:7})}}function mt(t){let e,s,u,v,p,_,x,y,E;return{c(){e=n("div"),s=n("div"),u=n("a"),v=l("Options"),p=m(),_=n("button"),x=l("Play Again"),this.h()},l(t){e=r(t,"DIV",{class:!0});var n=a(e);s=r(n,"DIV",{class:!0});var l=a(s);u=r(l,"A",{class:!0,href:!0});var o=a(u);v=i(o,"Options"),o.forEach(c),p=g(l),_=r(l,"BUTTON",{class:!0});var f=a(_);x=i(f,"Play Again"),f.forEach(c),l.forEach(c),n.forEach(c),this.h()},h(){o(u,"class","button button-primary"),o(u,"href","/"),o(_,"class","button button-primary"),o(s,"class","board-score flex flex-row items-center justify-center p-16 svelte-1nx1m6n"),o(e,"class","board-overlay flex flex-row items-center justify-center w-full h-full fixed inset-0 svelte-1nx1m6n")},m(n,l){f(n,e,l),h(e,s),h(s,u),h(u,v),h(s,p),h(s,_),h(_,x),y||(E=$(_,"click",t[2]),y=!0)},p:d,d(t){t&&c(e),y=!1,E()}}}function gt(t){let e,s,l,i,u,d,v,p,$,_;l=new dt({props:{dictionary:t[0],game:Y}}),d=new G({props:{timer:t[1].timer_text}}),p=new st({props:{score_card:t[1].score_card}});let x=t[1].is_finished&&mt(t);return{c(){e=m(),s=n("div"),S(l.$$.fragment),i=m(),u=n("div"),S(d.$$.fragment),v=m(),S(p.$$.fragment),$=m(),x&&x.c(),this.h()},l(t){C('[data-svelte="svelte-i0fmef"]',document.head).forEach(c),e=g(t),s=r(t,"DIV",{class:!0});var n=a(s);O(l.$$.fragment,n),i=g(n),u=r(n,"DIV",{class:!0});var o=a(u);O(d.$$.fragment,o),v=g(o),O(p.$$.fragment,o),o.forEach(c),$=g(n),x&&x.l(n),n.forEach(c),this.h()},h(){document.title="Hex-Spell: Play",o(u,"class","right-pane pl-8 svelte-1nx1m6n"),o(s,"class","flex justify-center")},m(t,n){f(t,e,n),f(t,s,n),T(l,s,null),h(s,i),h(s,u),T(d,u,null),h(u,v),T(p,u,null),h(s,$),x&&x.m(s,null),_=!0},p(t,[e]){const n={};1&e&&(n.dictionary=t[0]),l.$set(n);const r={};2&e&&(r.timer=t[1].timer_text),d.$set(r);const a={};2&e&&(a.score_card=t[1].score_card),p.$set(a),t[1].is_finished?x?x.p(t,e):(x=mt(t),x.c(),x.m(s,null)):x&&(x.d(1),x=null)},i(t){_||(I(l.$$.fragment,t),I(d.$$.fragment,t),I(p.$$.fragment,t),_=!0)},o(t){D(l.$$.fragment,t),D(d.$$.fragment,t),D(p.$$.fragment,t),_=!1},d(t){t&&c(e),t&&c(s),A(l),A(d),A(p),x&&x.d()}}}var vt=function(t,e,s,n){return new(s||(s=Promise))((function(l,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function i(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?l(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,i)}c((n=n.apply(t,e||[])).next())}))};const pt=!1,$t=!1;function _t({page:t}){return vt(this,void 0,void 0,(function*(){const e=yield fetch("https://hex-spell.com/data/wordlist.txt"),s=yield e.text(),n=new Set(s.split("\n"));return{props:{dictionary:{isWord:t=>n.has(t)},time_limit:parseInt(t.query.get("time"),10)||X()}}}))}function xt(t,e,s){let n;L(t,Y,(t=>s(1,n=t)));let{time_limit:l}=e,{dictionary:r}=e;return Z(l),Y.start({time_limit:l}),U((()=>Y.quit())),t.$$set=t=>{"time_limit"in t&&s(3,l=t.time_limit),"dictionary"in t&&s(0,r=t.dictionary)},[r,n,function(){Y.start({time_limit:l})},l]}export default class extends t{constructor(t){super(),e(this,t,xt,gt,s,{time_limit:3,dictionary:0})}}export{_t as load,pt as prerender,$t as ssr};
