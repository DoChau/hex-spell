var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,o=(t,e)=>{for(var s in e||(e={}))n.call(e,s)&&a(t,s,e[s]);if(r)for(var s of r(e))l.call(e,s)&&a(t,s,e[s]);return t},i=(t,r)=>e(t,s(r));import{C as c,S as f,i as u,s as h,e as d,t as m,c as p,a as _,g,d as v,b as $,f as y,D as x,h as b,E as w,k as E,n as I,H as O,P as D,L as j,Q as V,O as P,R as A,B as S,T,u as k,v as C,r as N,U as B,j as L,m as U,o as q,V as W,W as H,X as M,w as R,Y as Q,Z as X,I as Y,_ as Z,$ as z}from"../chunks/vendor-61dc19e2.js";import{s as F,B as G,c as J,A as K,g as tt,T as et,a as st,d as rt,b as nt,e as lt,f as at,h as ot,i as it,j as ct,k as ft,l as ut}from"../chunks/localstorage-41948a48.js";const ht=function(){const{subscribe:t,update:e}=c({board_tiles:null,score_card:null,start_time:null,timer_text:null,is_finished:!1});let s=[...lt],r=Array(G),n=Array(G).fill(null).map((()=>[]));function l(t){const[e,s]=at(t);return n[s][e].value.toUpperCase()}return{subscribe:t,start:({time_limit:t})=>e((()=>{s=[...lt],F(s),r=Array(G),n=Array(G).fill(null).map((()=>[]));for(let t=0;t<J;t++)for(let e=0;e<G;e++){const l=t*G+e;n[e].push({index:l,value:s[l%K]}),r[e]=l}const l=+new Date,a=setInterval((()=>{e((e=>{if(e.start_time!==l)return clearInterval(a),e;const s=+new Date,r=Math.round((s-l)/1e3);if(r>t){clearInterval(a);const s=tt()||{best_word:"",game_types:et.map((t=>({time_limit:t,score:0})))},r=s.game_types.find((e=>e.time_limit===t));r&&r.score<e.score_card.score&&(r.score=e.score_card.score);let n=st(s.best_word);for(const t of e.score_card.matched_words){const e=st(t);e>n&&(s.best_word=t,n=e)}return rt(s),i(o({},e),{is_finished:!0,timer_text:nt(0)})}return i(o({},e),{timer_text:nt(t-r)})}))}),1e3);return{board_tiles:n,score_card:{score:0,matched_words:[]},start_time:l,timer_text:nt(t),is_finished:!1}})),match:(t,a)=>e((e=>{if(t.length<3)return e;const c=t.map(l).join("");if(!a.isWord(c.toLowerCase()))return e;for(const s of t){const[t,e]=at(s);n[e][t]=null}for(let t=0;t<G;t++)if(n[t].includes(null)){n[t]=n[t].filter((t=>t));const e=J-n[t].length;for(let l=0;l<e;l++)r[t]+=G,n[t].push({index:r[t],value:s[r[t]%K]})}return i(o({},e),{board_tiles:[...n],score_card:{matched_words:[...e.score_card.matched_words,c],score:e.score_card.score+st(c)}})})),quit:()=>e((t=>i(o({},t),{start_time:null})))}}();function dt(t){let e,s,r;return{c(){e=d("section"),s=m("Timer: "),r=m(t[0]),this.h()},l(n){e=p(n,"SECTION",{class:!0});var l=_(e);s=g(l,"Timer: "),r=g(l,t[0]),l.forEach(v),this.h()},h(){$(e,"class","text-2xl")},m(t,n){y(t,e,n),x(e,s),x(e,r)},p(t,[e]){1&e&&b(r,t[0])},i:w,o:w,d(t){t&&v(e)}}}function mt(t,e,s){let{timer:r}=e;return t.$$set=t=>{"timer"in t&&s(0,r=t.timer)},[r]}class pt extends f{constructor(t){super(),u(this,t,mt,dt,h,{timer:0})}}function _t(t,e,s){const r=t.slice();return r[1]=e[s],r}function gt(t){let e,s,r,n,l,a,o,i=t[1]+"",c=st(t[1])+"";return{c(){e=d("li"),s=d("span"),r=m(i),n=E(),l=d("span"),a=m(c),o=E(),this.h()},l(t){e=p(t,"LI",{class:!0});var f=_(e);s=p(f,"SPAN",{class:!0});var u=_(s);r=g(u,i),u.forEach(v),n=I(f),l=p(f,"SPAN",{class:!0});var h=_(l);a=g(h,c),h.forEach(v),o=I(f),f.forEach(v),this.h()},h(){$(s,"class","text-left"),$(l,"class","text-right"),$(e,"class","flex flex-row justify-between")},m(t,i){y(t,e,i),x(e,s),x(s,r),x(e,n),x(e,l),x(l,a),x(e,o)},p(t,e){1&e&&i!==(i=t[1]+"")&&b(r,i),1&e&&c!==(c=st(t[1])+"")&&b(a,c)},d(t){t&&v(e)}}}function vt(t){let e,s,r,n,l,a,o=t[0].score+"",i=t[0].matched_words,c=[];for(let f=0;f<i.length;f+=1)c[f]=gt(_t(t,i,f));return{c(){e=d("section"),s=d("div"),r=m("Score: "),n=m(o),l=E(),a=d("ul");for(let t=0;t<c.length;t+=1)c[t].c();this.h()},l(t){e=p(t,"SECTION",{class:!0});var i=_(e);s=p(i,"DIV",{class:!0});var f=_(s);r=g(f,"Score: "),n=g(f,o),f.forEach(v),l=I(i),a=p(i,"UL",{class:!0});var u=_(a);for(let e=0;e<c.length;e+=1)c[e].l(u);u.forEach(v),i.forEach(v),this.h()},h(){$(s,"class","text-2xl"),$(a,"class","word-list list-none text-xl svelte-10fauh5"),$(e,"class","score-card")},m(t,o){y(t,e,o),x(e,s),x(s,r),x(s,n),x(e,l),x(e,a);for(let e=0;e<c.length;e+=1)c[e].m(a,null)},p(t,[e]){if(1&e&&o!==(o=t[0].score+"")&&b(n,o),1&e){let s;for(i=t[0].matched_words,s=0;s<i.length;s+=1){const r=_t(t,i,s);c[s]?c[s].p(r,e):(c[s]=gt(r),c[s].c(),c[s].m(a,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=i.length}},i:w,o:w,d(t){t&&v(e),O(c,t)}}}function $t(t,e,s){let{score_card:r}=e;return t.$$set=t=>{"score_card"in t&&s(0,r=t.score_card)},[r]}class yt extends f{constructor(t){super(),u(this,t,$t,vt,h,{score_card:0})}}function xt(t){let e,s,r,n,l,a;return{c(){e=d("div"),s=d("div"),r=d("div"),n=m(t[1]),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=_(e);s=p(a,"DIV",{class:!0});var o=_(s);r=p(o,"DIV",{class:!0});var i=_(r);n=g(i,t[1]),i.forEach(v),o.forEach(v),a.forEach(v),this.h()},h(){$(r,"class","text-4xl"),$(s,"class","hex__body svelte-1wkmy7c"),$(e,"class","hex svelte-1wkmy7c"),D(e,"hex--selected",t[0])},m(o,i){y(o,e,i),x(e,s),x(s,r),x(r,n),l||(a=[j(e,"selectstart",V(t[2])),j(e,"mousedown",V(t[3])),j(e,"mouseover",V(t[4])),j(e,"selectstart",V(t[5]))],l=!0)},p(t,[s]){2&s&&b(n,t[1]),1&s&&D(e,"hex--selected",t[0])},i:w,o:w,d(t){t&&v(e),l=!1,P(a)}}}function bt(t,e,s){let{is_selected:r}=e,{tile:n}=e;return t.$$set=t=>{"is_selected"in t&&s(0,r=t.is_selected),"tile"in t&&s(1,n=t.tile)},[r,n,function(e){A(t,e)},function(e){A(t,e)},function(e){A(t,e)},function(e){A(t,e)}]}class wt extends f{constructor(t){super(),u(this,t,bt,xt,h,{is_selected:0,tile:1})}}function Et(t,e,s){const r=t.slice();return r[15]=e[s],r[17]=s,r}function It(t,e,s){const r=t.slice();return r[18]=e[s],r[20]=s,r}function Ot(t){let e,s;return{c(){e=d("div"),this.h()},l(t){e=p(t,"DIV",{class:!0}),_(e).forEach(v),this.h()},h(){$(e,"class",s=W(`board-tiles__edge board-tiles__edge--position-${t[1][ot(t[20],t[17])]}`)+" svelte-3fu470")},m(t,s){y(t,e,s)},p(t,r){6&r&&s!==(s=W(`board-tiles__edge board-tiles__edge--position-${t[1][ot(t[20],t[17])]}`)+" svelte-3fu470")&&$(e,"class",s)},d(t){t&&v(e)}}}function Dt(t,e){let s,r,n,l,a,o="boolean"!=typeof e[1][ot(e[20],e[17])],i=w,c=o&&Ot(e);return n=new wt({props:{tile:e[18].value,is_selected:!1!==e[1][ot(e[20],e[17])]}}),n.$on("mousedown",(function(){return e[8](e[20],e[17])})),n.$on("mouseover",(function(){return e[9](e[20],e[17])})),{key:t,first:null,c(){s=d("div"),c&&c.c(),r=E(),L(n.$$.fragment),this.h()},l(t){s=p(t,"DIV",{class:!0});var e=_(s);c&&c.l(e),r=I(e),U(n.$$.fragment,e),e.forEach(v),this.h()},h(){$(s,"class","board-tiles__tile svelte-3fu470"),this.first=s},m(t,e){y(t,s,e),c&&c.m(s,null),x(s,r),q(n,s,null),a=!0},p(t,l){e=t,6&l&&(o="boolean"!=typeof e[1][ot(e[20],e[17])]),o?c?c.p(e,l):(c=Ot(e),c.c(),c.m(s,r)):c&&(c.d(1),c=null);const a={};4&l&&(a.tile=e[18].value),6&l&&(a.is_selected=!1!==e[1][ot(e[20],e[17])]),n.$set(a)},r(){l=s.getBoundingClientRect()},f(){H(s),i()},a(){i(),i=M(s,l,X,{duration:400})},i(t){a||(C(n.$$.fragment,t),a=!0)},o(t){N(n.$$.fragment,t),a=!1},d(t){t&&v(s),c&&c.d(),R(n)}}}function jt(t){let e,s,r,n=[],l=new Map,a=t[15];const o=t=>t[18].index;for(let i=0;i<a.length;i+=1){let e=It(t,a,i),s=o(e);l.set(s,n[i]=Dt(s,e))}return{c(){e=d("div");for(let t=0;t<n.length;t+=1)n[t].c();s=E(),this.h()},l(t){e=p(t,"DIV",{class:!0});var r=_(e);for(let e=0;e<n.length;e+=1)n[e].l(r);s=I(r),r.forEach(v),this.h()},h(){$(e,"class","board-tiles__col svelte-3fu470"),D(e,"board-tiles__col--even",t[17]%2)},m(t,l){y(t,e,l);for(let s=0;s<n.length;s+=1)n[s].m(e,null);x(e,s),r=!0},p(t,r){if(102&r){a=t[15],S();for(let t=0;t<n.length;t+=1)n[t].r();n=T(n,r,o,1,t,a,l,e,Q,Dt,s,It);for(let t=0;t<n.length;t+=1)n[t].a();k()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)C(n[t]);r=!0}},o(t){for(let e=0;e<n.length;e+=1)N(n[e]);r=!1},d(t){t&&v(e);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Vt(t){let e,s,r,n,l,a=t[2].board_tiles,o=[];for(let c=0;c<a.length;c+=1)o[c]=jt(Et(t,a,c));const i=t=>N(o[t],1,1,(()=>{o[t]=null}));return{c(){e=d("section"),s=d("div");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){e=p(t,"SECTION",{class:!0});var r=_(e);s=p(r,"DIV",{class:!0});var n=_(s);for(let e=0;e<o.length;e+=1)o[e].l(n);n.forEach(v),r.forEach(v),this.h()},h(){$(s,"class","board-tiles svelte-3fu470"),$(e,"class","board svelte-3fu470")},m(a,i){y(a,e,i),x(e,s);for(let t=0;t<o.length;t+=1)o[t].m(s,null);r=!0,n||(l=[j(s,"mouseleave",V(t[10])),j(s,"mouseup",V(t[11]))],n=!0)},p(t,[e]){if(102&e){let r;for(a=t[2].board_tiles,r=0;r<a.length;r+=1){const n=Et(t,a,r);o[r]?(o[r].p(n,e),C(o[r],1)):(o[r]=jt(n),o[r].c(),C(o[r],1),o[r].m(s,null))}for(S(),r=a.length;r<o.length;r+=1)i(r);k()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)C(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)N(o[e]);r=!1},d(t){t&&v(e),O(o,t),n=!1,P(l)}}}function Pt(t,e,s){let r,n=w,l=()=>(n(),n=B(a,(t=>s(2,r=t))),a);t.$$.on_destroy.push((()=>n()));let{game:a}=e;l();let{dictionary:o}=e,i=[],c=!1,f=Array(G*J).fill(!1);function u(){for(const t of i)s(1,f[t]=!1,f);i=[]}function h(){c=!1,u()}function d(){c=!1,a.match(i,o),u()}function m(t,e){c=!0,u(),i=[ot(t,e)],s(1,f[ot(t,e)]=!0,f)}function p(t,e){if(c){const r=ot(t,e),n=i.indexOf(r);if(-1===n){const n=ot(t,e);(0===i.length||it(n,i[i.length-1]))&&(s(1,f[n]=ct(n,i[i.length-1]),f),i.push(r),i=i)}else if(n===i.length-2){const t=i.pop();i=i,s(1,f[t]=!1,f)}}}return t.$$set=t=>{"game"in t&&l(s(0,a=t.game)),"dictionary"in t&&s(7,o=t.dictionary)},[a,f,r,h,d,m,p,o,(t,e)=>m(t,e),(t,e)=>p(t,e),()=>h(),()=>d()]}class At extends f{constructor(t){super(),u(this,t,Pt,Vt,h,{game:0,dictionary:7})}}function St(t){let e,s,r,n,l,a,o,i,c;return{c(){e=d("div"),s=d("div"),r=d("a"),n=m("Options"),l=E(),a=d("button"),o=m("Play Again"),this.h()},l(t){e=p(t,"DIV",{class:!0});var i=_(e);s=p(i,"DIV",{class:!0});var c=_(s);r=p(c,"A",{class:!0,href:!0});var f=_(r);n=g(f,"Options"),f.forEach(v),l=I(c),a=p(c,"BUTTON",{class:!0});var u=_(a);o=g(u,"Play Again"),u.forEach(v),c.forEach(v),i.forEach(v),this.h()},h(){$(r,"class","button button-primary"),$(r,"href","/"),$(a,"class","button button-primary"),$(s,"class","board-score flex flex-row items-center justify-center p-16 svelte-1nx1m6n"),$(e,"class","board-overlay flex flex-row items-center justify-center w-full h-full fixed inset-0 svelte-1nx1m6n")},m(f,u){y(f,e,u),x(e,s),x(s,r),x(r,n),x(s,l),x(s,a),x(a,o),i||(c=j(a,"click",t[2]),i=!0)},p:w,d(t){t&&v(e),i=!1,c()}}}function Tt(t){let e,s,r,n,l,a,o,i,c,f;r=new At({props:{dictionary:t[0],game:ht}}),a=new pt({props:{timer:t[1].timer_text}}),i=new yt({props:{score_card:t[1].score_card}});let u=t[1].is_finished&&St(t);return{c(){e=E(),s=d("div"),L(r.$$.fragment),n=E(),l=d("div"),L(a.$$.fragment),o=E(),L(i.$$.fragment),c=E(),u&&u.c(),this.h()},l(t){Y('[data-svelte="svelte-i0fmef"]',document.head).forEach(v),e=I(t),s=p(t,"DIV",{class:!0});var f=_(s);U(r.$$.fragment,f),n=I(f),l=p(f,"DIV",{class:!0});var h=_(l);U(a.$$.fragment,h),o=I(h),U(i.$$.fragment,h),h.forEach(v),c=I(f),u&&u.l(f),f.forEach(v),this.h()},h(){document.title="Hex-Spell: Play",$(l,"class","right-pane pl-8 svelte-1nx1m6n"),$(s,"class","flex justify-center")},m(t,h){y(t,e,h),y(t,s,h),q(r,s,null),x(s,n),x(s,l),q(a,l,null),x(l,o),q(i,l,null),x(s,c),u&&u.m(s,null),f=!0},p(t,[e]){const n={};1&e&&(n.dictionary=t[0]),r.$set(n);const l={};2&e&&(l.timer=t[1].timer_text),a.$set(l);const o={};2&e&&(o.score_card=t[1].score_card),i.$set(o),t[1].is_finished?u?u.p(t,e):(u=St(t),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},i(t){f||(C(r.$$.fragment,t),C(a.$$.fragment,t),C(i.$$.fragment,t),f=!0)},o(t){N(r.$$.fragment,t),N(a.$$.fragment,t),N(i.$$.fragment,t),f=!1},d(t){t&&v(e),t&&v(s),R(r),R(a),R(i),u&&u.d()}}}var kt=function(t,e,s,r){return new(s||(s=Promise))((function(n,l){function a(t){try{i(r.next(t))}catch(e){l(e)}}function o(t){try{i(r.throw(t))}catch(e){l(e)}}function i(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}i((r=r.apply(t,e||[])).next())}))};const Ct=!1,Nt=!1;function Bt({page:t}){return kt(this,void 0,void 0,(function*(){const e=yield fetch("https://hex-spell.com/data/wordlist.txt"),s=yield e.text(),r=new Set(s.split("\n"));return{props:{dictionary:{isWord:t=>r.has(t)},time_limit:parseInt(t.query.get("time"),10)||ft()}}}))}function Lt(t,e,s){let r;Z(t,ht,(t=>s(1,r=t)));let{time_limit:n}=e,{dictionary:l}=e;return ut(n),ht.start({time_limit:n}),z((()=>ht.quit())),t.$$set=t=>{"time_limit"in t&&s(3,n=t.time_limit),"dictionary"in t&&s(0,l=t.dictionary)},[l,r,function(){ht.start({time_limit:n})},n]}export default class extends f{constructor(t){super(),u(this,t,Lt,Tt,h,{time_limit:3,dictionary:0})}}export{Bt as load,Ct as prerender,Nt as ssr};
